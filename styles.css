/* iPhone-focused mobile-first dark theme */
:root {
  --bg: #0b0f1f;
  --frame: #0f1220;
  --card: #141833;
  --text: #e6e8f0;
  --muted: #9aa3b2;
  --primary: #7c5cff;
  --primary-700: #6547e6;
  --accent: #14b8a6;
  --danger: #ef4444;
  --income: #22c55e;
  --expense: #f97316;
  --remaining: #3b82f6;
  --border: #232a49;
  --shadow: rgba(0,0,0,0.35);
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, 'Inter', Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  -webkit-text-size-adjust: 100%; /* evita zoom automático del iPhone */
}

.phone-frame {
  max-width: 430px; /* iPhone 14 Pro Max ancho aprox */
  min-height: 100svh; /* soporta barra de direcciones dinámica en iOS */
  margin: 0 auto;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  display: grid;
  grid-template-rows: auto 1fr;
  border-left: 1px solid var(--border);
  border-right: 1px solid var(--border);
}
.ios-safe { padding-bottom: calc(8px + var(--safe-bottom)); }

.topbar {
  padding: calc(.75rem + var(--safe-top)) 1rem .75rem;
  background: var(--frame);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 10;
  -webkit-backdrop-filter: saturate(180%) blur(10px);
  backdrop-filter: saturate(180%) blur(10px);
}
.topbar-title { font-weight: 700; }
.topbar-sub { color: var(--muted); font-size: .85rem; }

.screen { padding: .75rem; -webkit-overflow-scrolling: touch; }

.tabs { display: flex; gap: .5rem; margin-bottom: .75rem; }
.tab-btn { flex: 1; padding: .6rem .75rem; background: #12152a; border: 1px solid var(--border); border-radius: 999px; color: var(--text); touch-action: manipulation; }
.tab-btn.active { background: var(--primary); border-color: var(--primary-700); }

.view { display: none; }
.view.active { display: block; }

.card-block {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: 0 10px 30px var(--shadow);
  padding: .9rem;
  margin-bottom: .75rem;
}
h2 { margin: 0 0 .5rem; font-size: 1rem; }

.field { margin-bottom: .6rem; }
.field label { display: block; margin-bottom: .25rem; color: var(--muted); font-size: .9rem; }

.input-with-prefix { display: flex; align-items: center; background: #12152a; border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
.input-with-prefix .prefix { padding: .6rem .7rem; color: var(--muted); }
.input-with-prefix input { flex: 1; padding: .6rem .7rem; background: transparent; border: none; outline: none; color: var(--text); font-size: 1rem; }

input[type="text"], input[type="number"], select { width: 100%; background: #12152a; border: 1px solid var(--border); border-radius: 12px; padding: .6rem .7rem; color: var(--text); font-size: 1rem; }

.actions { display: flex; gap: .5rem; }
.btn { flex: 1; padding: .8rem .9rem; border-radius: 12px; border: 1px solid var(--border); cursor: pointer; background: #12152a; color: var(--text); transition: transform .06s ease, background .25s ease, border-color .25s ease; touch-action: manipulation; }
.btn:hover { transform: translateY(-1px); border-color: #2e3766; }
.btn.primary { background: var(--primary); border-color: var(--primary-700); }
.btn.primary:hover { background: var(--primary-700); }
.btn.ghost { background: transparent; }

.summary-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: .5rem; }
.summary-item { background: #12152a; border: 1px solid var(--border); border-radius: 12px; padding: .6rem; }
.summary-item span { color: var(--muted); font-size: .85rem; }
.summary-item strong { display: block; font-size: 1.1rem; margin-top: .25rem; }
.summary-item.remaining strong { color: var(--accent); }

.chart { display: grid; gap: .6rem; }
.bar-row { display: grid; grid-template-columns: 92px 1fr; align-items: center; gap: .5rem; }
.bar-label { color: var(--muted); font-size: .9rem; }
.bar-track { position: relative; height: 18px; background: #0f1328; border: 1px solid var(--border); border-radius: 999px; overflow: hidden; }
.bar { height: 100%; width: 0%; transition: width 600ms cubic-bezier(0.23, 1, 0.32, 1); }
.bar.income { background: linear-gradient(90deg, #16a34a, var(--income)); }
.bar.expense { background: linear-gradient(90deg, #c2410c, var(--expense)); }
.bar.remaining { background: linear-gradient(90deg, #2563eb, var(--remaining)); }

.legend { display: flex; gap: .75rem; align-items: center; color: var(--muted); margin-top: .35rem; font-size: .9rem; }
.dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }
.dot.income { background: #16a34a; }
.dot.expense { background: #c2410c; }
.dot.remaining { background: #2563eb; }

.list-header { display: flex; gap: .5rem; align-items: center; justify-content: space-between; }
.search { width: 60%; }
.list { overflow-x: auto; }
.table { width: 100%; border-collapse: collapse; }
.table thead th { text-align: left; color: var(--muted); border-bottom: 1px solid var(--border); padding: .4rem; font-size: .9rem; }
.table td { border-bottom: 1px solid var(--border); padding: .5rem .4rem; font-size: .95rem; }
.table td.label { color: var(--muted); }
.table td.num, .table th.num { text-align: right; }
.table tbody tr:hover { background: rgba(255,255,255,0.03); }
.row-actions { display: flex; justify-content: flex-end; }
.row-actions .btn { font-size: .85rem; padding: .35rem .55rem; }

.reco-box { background: #12152a; border: 1px solid var(--border); border-radius: 12px; padding: .7rem; line-height: 1.45; }
.reco-box .status { font-weight: 700; }
.reco-box .note { color: var(--muted); margin-top: .25rem; font-size: .95rem; }
.reco-box .invest { margin-top: .6rem; }
.reco-box .pill { display: inline-block; background: #0f1328; border: 1px solid var(--border); border-radius: 999px; padding: .25rem .5rem; font-size: .85rem; margin-right: .35rem; color: var(--muted); }
.badges { margin-top: .5rem; display: flex; gap: .5rem; flex-wrap: wrap; }
.badge { font-size: .85rem; padding: .25rem .5rem; border-radius: 999px; border: 1px solid var(--border); }
.badge.ok { color: #16a34a; border-color: #14532d; background: #0e1b14; }
.badge.warn { color: #eab308; border-color: #3f2c05; background: #1a1407; }
.badge.danger { color: #ef4444; border-color: #3f1d1d; background: #1b0f0f; }

button:focus-visible, input:focus-visible, select:focus-visible { outline: 2px solid var(--primary-700); outline-offset: 2px; }

@media (max-width: 360px) { .summary-grid { grid-template-columns: 1fr 1fr; } }
